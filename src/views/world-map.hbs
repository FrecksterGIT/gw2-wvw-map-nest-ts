<div class="container" lang="{{locale}}">
  <h1>{{title}}</h1>

  <div class="lang-switch">
    <a href="/">en</a>
    <a href="/es">es</a>
    <a href="/de">de</a>
    <a href="/fr">fr</a>
    <div class="icons">
      <a href="https://github.com/FrecksterGIT/gw2-wvw-map-nest-ts" class="github"></a>
      <div class="version">{{version}}</div>
    </div>
  </div>

  <gw2-world data-focussed-map="" data-subscribe="BloodlustUpdate">
    <gw2-match-statistics data-subscribe="SubscribeUpdate,ScoreUpdate" data-open="false">
      <div class="data border kd"></div>
      <div class="headline">{{t "Placings" locale}}</div>
      <div class="data border distribution"></div>
      <div class="headline">{{t "Hourly Income (scaled to max overall)" locale}}</div>
      <div class="data border hourly2"></div>
      <div class="headline">{{t "Hourly Income (scaled to max income per team)" locale}}</div>
      <div class="data border hourly"></div>
      <div class="headline">{{t "Skirmish Results" locale}}</div>
      <div class="data skirmishessvg"></div>
      <div class="data skirmishes"></div>

      <script id="stats-template" type="text/x-handlebars-template">
        <div class="statistics-entry">
          <div class="header">\{{header}}</div>
          <div class="score\{{#if colored}} green\{{/if}}">
            <div class="bar" style="width: \{{scores.green.percent}}"></div>
            <div class="value" style="left: calc(\{{scores.green.percent}} + 10px)">\{{scores.green.score}}</div>
          </div>
          <div class="score\{{#if colored}} blue\{{/if}}">
            <div class="bar" style="width: \{{scores.blue.percent}}"></div>
            <div class="value" style="left: calc(\{{scores.blue.percent}} + 10px)">\{{scores.blue.score}}</div>
          </div>
          <div class="score\{{#if colored}} red\{{/if}}">
            <div class="bar" style="width: \{{scores.red.percent}}"></div>
            <div class="value" style="left: calc(\{{scores.red.percent}} + 10px)">\{{scores.red.score}}</div>
          </div>
        </div>
      </script>

    </gw2-match-statistics>

    {{#each map as |objectives mapId|}}
      <div class="map" data-map-id="{{mapId}}">
        {{#each objectives}}
          <gw2-objective data-subscribe="ObjectiveUpdate"
                         data-id="{{id}}"
                         data-map-id="{{mapId}}"
                         data-type="{{type}}"
                         data-name="{{name}}"
                         data-chat-link="{{chat_link}}"
                         style="left:{{display_coord.[0]}}%;top:{{display_coord.[1]}}%;">
            <section>
              <figure class="emblem"></figure>
              <b>{{name}}</b>
              <dl>
                <dt class="turned">{{t 'Turned' ../../locale}}</dt>
                <dd class="turned value"></dd>
                <dt class="guild">{{t 'Guild' ../../locale}}</dt>
                <dd class="guild value"></dd>
                <dt class="claimed">{{t 'Claimed' ../../locale}}</dt>
                <dd class="claimed value"></dd>
                <dt class="yaks">{{t 'Dolyaks' ../../locale}}</dt>
                <dd class="yaks value"></dd>
              </dl>
              <div class="upgrades"></div>
            </section>
            <aside></aside>
            <figure class="waypoint"></figure>
          </gw2-objective>
        {{/each}}
      </div>
    {{/each}}
  </gw2-world>

  <aside class="infoarea">
    <gw2-settings>
      <div class="icon world" title="{{t "Select your world." locale}}">
        <svg height="16px" viewBox="0 0 32 32" width="16px" xmlns="http://www.w3.org/2000/svg">
          <path fill="currentColor"
                d="M15.624,1.028c-7.811,0-14.167,6.355-14.167,14.167c0,7.812,6.356,14.167,14.167,14.167 c7.812,0,14.168-6.354,14.168-14.167C29.792,7.383,23.436,1.028,15.624,1.028z M28.567,15.195c0,0.248-0.022,0.49-0.037,0.735 c-0.091-0.23-0.229-0.53-0.262-0.659c-0.048-0.196-0.341-0.879-0.341-0.879s-0.293-0.39-0.488-0.488 c-0.194-0.098-0.341-0.342-0.683-0.536c-0.342-0.196-0.487-0.293-0.779-0.293c-0.294,0-0.585-0.391-0.928-0.586 c-0.342-0.194-0.39-0.097-0.39-0.097s0.39,0.585,0.39,0.731c0,0.146,0.438,0.39,0.879,0.292c0,0,0.292,0.537,0.438,0.683 c0.146,0.146-0.049,0.293-0.341,0.488c-0.293,0.194-0.244,0.146-0.392,0.292c-0.146,0.146-0.633,0.392-0.78,0.488   c-0.146,0.097-0.731,0.39-1.023,0.097c-0.143-0.141-0.099-0.438-0.195-0.634c-0.098-0.195-1.122-1.707-1.61-2.389   c-0.085-0.12-0.293-0.49-0.438-0.585c-0.146-0.099,0.342-0.099,0.342-0.099s0-0.342-0.049-0.585   c-0.05-0.244,0.049-0.585,0.049-0.585s-0.488,0.292-0.636,0.39c-0.145,0.098-0.292-0.194-0.486-0.439   c-0.195-0.243-0.391-0.537-0.439-0.781c-0.049-0.243,0.244-0.341,0.244-0.341l0.438-0.243c0,0,0.537-0.097,0.879-0.049   c0.341,0.049,0.877,0.098,0.877,0.098s0.146-0.342-0.049-0.488c-0.194-0.146-0.635-0.39-0.83-0.341   c-0.194,0.048,0.097-0.244,0.34-0.439l-0.54-0.098c0,0-0.491,0.244-0.638,0.293c-0.146,0.048-0.4,0.146-0.596,0.39   c-0.194,0.244,0.078,0.585-0.117,0.683c-0.194,0.098-0.326,0.146-0.473,0.194c-0.146,0.049-0.61,0-0.61,0   c-0.504,0-0.181,0.46-0.05,0.623l-0.39-0.476L18.564,8.88c0,0-0.416-0.292-0.611-0.389c-0.195-0.098-0.796-0.439-0.796-0.439   l0.042,0.439l0.565,0.572l0.05,0.013l0.294,0.39l-0.649,0.049V9.129c-0.612-0.148-0.452-0.3-0.521-0.347   c-0.145-0.097-0.484-0.342-0.484-0.342s-0.574,0.098-0.721,0.147c-0.147,0.049-0.188,0.195-0.479,0.292   c-0.294,0.098-0.426,0.244-0.523,0.39s-0.415,0.585-0.608,0.78c-0.196,0.196-0.558,0.146-0.704,0.146   c-0.147,0-0.851-0.195-0.851-0.195V9.173c0,0,0.095-0.464,0.047-0.61l0.427-0.072l0.713-0.147l0.209-0.147l0.3-0.39   c0,0-0.337-0.244-0.094-0.585c0.117-0.164,0.538-0.195,0.733-0.341c0.194-0.146,0.489-0.244,0.489-0.244s0.342-0.292,0.683-0.634   c0,0,0.244-0.147,0.536-0.245c0,0,0.83,0.732,0.977,0.732s0.683-0.341,0.683-0.341s0.146-0.438,0.098-0.585   c-0.049-0.146-0.293-0.634-0.293-0.634s-0.146,0.244-0.292,0.439s-0.244,0.439-0.244,0.439s-0.683-0.047-0.731-0.193   c-0.05-0.147-0.146-0.388-0.196-0.533c-0.047-0.147-0.438-0.142-0.729-0.044c-0.294,0.098,0.047-0.526,0.047-0.526   s0.294-0.368,0.488-0.368s0.635-0.25,0.828-0.298c0.196-0.049,0.783-0.272,1.025-0.272c0.244,0,0.537,0.105,0.684,0.105   s0.731,0,0.731,0l1.023-0.082c0,0,0.879,0.325,0.585,0.521c0,0,0.343,0.211,0.489,0.357c0.137,0.138,0.491-0.127,0.694-0.24   C26.127,6.525,28.567,10.576,28.567,15.195z M5.296,7.563c0,0.195-0.266,0.242,0,0.732c0.34,0.634,0.048,0.927,0.048,0.927   s-0.83,0.585-0.976,0.683c-0.146,0.098-0.536,0.634-0.293,0.487c0.244-0.146,0.536-0.292,0.293,0.098   c-0.244,0.391-0.683,1.024-0.78,1.269s-0.585,0.829-0.585,1.122c0,0.293-0.195,0.879-0.146,1.123   c0.033,0.17-0.075,0.671-0.16,0.877c0.066-2.742,0.989-5.269,2.513-7.336C5.26,7.55,5.296,7.563,5.296,7.563z M6.863,5.693   c1.193-1.101,2.591-1.979,4.133-2.573c-0.152,0.195-0.336,0.395-0.336,0.395s-0.341-0.001-0.976,0.683   C9.051,4.881,9.197,4.686,9.051,4.88S8.953,5.124,8.611,5.369C8.271,5.612,8.124,5.905,8.124,5.905L7.587,6.1L7.149,5.905   c0,0-0.392,0.147-0.343-0.049C6.82,5.804,6.841,5.75,6.863,5.693z M12.709,6.831l-0.194-0.292L12.709,6.1l0.47,0.188V5.417   l0.449-0.243l0.373,0.536l0.574,0.635l-0.381,0.292l-1.016,0.195V6.315L12.709,6.831z M19.051,11.416   c0.114-0.09,0.487,0.146,0.487,0.146s1.219,0.244,1.414,0.39c0.196,0.147,0.537,0.245,0.635,0.392   c0.098,0.146,0.438,0.585,0.486,0.731c0.05,0.146,0.294,0.684,0.343,0.878c0.049,0.195,0.195,0.683,0.341,0.927   c0.146,0.245,0.976,1.317,1.268,1.805l0.88-0.146c0,0-0.099,0.438-0.196,0.585c-0.097,0.146-0.39,0.536-0.536,0.731   c-0.147,0.195-0.341,0.488-0.634,0.731c-0.292,0.243-0.294,0.487-0.439,0.683c-0.146,0.195-0.342,0.634-0.342,0.634   s0.098,0.976,0.146,1.171s-0.341,0.731-0.341,0.731l-0.44,0.44l-0.588,0.779l0.048,0.731c0,0-0.444,0.343-0.689,0.537   c-0.242,0.194-0.204,0.341-0.399,0.537c-0.194,0.194-0.957,0.536-1.152,0.585s-1.271,0.195-1.271,0.195v-0.438l-0.022-0.488   c0,0-0.148-0.585-0.295-0.78s-0.083-0.489-0.327-0.732c-0.244-0.244-0.334-0.438-0.383-0.586c-0.049-0.146,0.053-0.584,0.053-0.584   s0.197-0.537,0.294-0.732c0.098-0.195,0.001-0.487-0.097-0.683s-0.145-0.684-0.145-0.829c0-0.146-0.392-0.391-0.538-0.537   c-0.146-0.146-0.097-0.342-0.097-0.535c0-0.197-0.146-0.635-0.098-0.977c0.049-0.341-0.438-0.098-0.731,0   c-0.293,0.098-0.487-0.098-0.487-0.391s-0.536-0.048-0.878,0.146c-0.343,0.195-0.732,0.195-1.124,0.342   c-0.389,0.146-0.583-0.146-0.583-0.146s-0.343-0.292-0.585-0.439c-0.245-0.146-0.489-0.438-0.685-0.682   c-0.194-0.245-0.683-0.977-0.73-1.268c-0.049-0.294,0-0.49,0-0.831s0-0.536,0.048-0.78c0.049-0.244,0.195-0.537,0.342-0.781   c0.146-0.244,0.683-0.536,0.828-0.634c0.146-0.097,0.488-0.389,0.488-0.585c0-0.195,0.196-0.292,0.292-0.488   c0.099-0.195,0.44-0.682,0.879-0.487c0,0,0.389-0.048,0.535-0.097s0.536-0.194,0.729-0.292c0.195-0.098,0.681-0.144,0.681-0.144   s0.384,0.153,0.53,0.153s0.622-0.085,0.622-0.085s0.22,0.707,0.22,0.854s0.146,0.292,0.391,0.39   C17.44,11.562,18.563,11.807,19.051,11.416z M24.66,20.977c0,0.146-0.049,0.537-0.098,0.732c-0.051,0.195-0.147,0.537-0.195,0.73   c-0.049,0.196-0.293,0.586-0.438,0.684c-0.146,0.098-0.391,0.391-0.536,0.439c-0.146,0.049-0.245-0.342-0.196-0.537   c0.05-0.195,0.293-0.731,0.293-0.731s0.049-0.292,0.097-0.488c0.05-0.194,0.635-0.438,0.635-0.438l0.391-0.732   C24.611,20.635,24.66,20.832,24.66,20.977z M3.015,18.071c0.063,0.016,0.153,0.062,0.28,0.175c0.184,0.16,0.293,0.242,0.537,0.341   c0.243,0.099,0.341,0.243,0.634,0.39c0.293,0.147,0.196,0.05,0.585,0.488c0.391,0.438,0.342,0.438,0.439,0.683   s0.244,0.487,0.342,0.635c0.098,0.146,0.39,0.243,0.536,0.341s0.39,0.195,0.536,0.195c0.147,0,0.586,0.439,0.83,0.487 c0.244,0.05,0.244,0.538,0.244,0.538l-0.244,0.682l-0.196,0.731l0.196,0.585c0,0-0.294,0.245-0.487,0.245 c-0.18,0-0.241,0.114-0.438,0.06C4.949,22.91,3.6,20.638,3.015,18.071z"></path>
        </svg>
      </div>
      <div class="icon audio" title="{{t "Switch audio for log on or off." locale}}">
        <svg height="16px" width="16px" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
          <path fill="currentColor" d="M19.779,3.349l-1.111,1.664C20.699,6.663,22,9.179,22,12 c0,2.822-1.301,5.338-3.332,6.988l1.111,1.663C22.345,18.639,24,15.516,24,12C24,8.485,22.346,5.362,19.779,3.349z M17.55,6.687 l-1.122,1.68c0.968,0.913,1.58,2.198,1.58,3.634s-0.612,2.722-1.58,3.635l1.122,1.68C19.047,16.03,20,14.128,20,12 C20,9.873,19.048,7.971,17.55,6.687z M12,1c-1.177,0-1.533,0.684-1.533,0.684S7.406,5.047,5.298,6.531C4.91,6.778,4.484,7,3.73,7 H2C0.896,7,0,7.896,0,9v6c0,1.104,0.896,2,2,2h1.73c0.754,0,1.18,0.222,1.567,0.469c2.108,1.484,5.169,4.848,5.169,4.848 S10.823,23,12,23c1.104,0,2-0.895,2-2V3C14,1.895,13.104,1,12,1z"></path>
        </svg>
      </div>
      <div class="icon stats" title="{{t "Show matchup statistics." locale}}">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16">
          <path stroke-width="2" stroke="currentColor" d="M1 2.5 L14 2.5 M1 7.5 L9 7.5 M1 12.5 L12 12.5"></path>
        </svg>
      </div>
    </gw2-settings>
    <gw2-match-status data-subscribe="SubscribeUpdate,ScoreUpdate">
      <div class="worlds"></div>
      <div class="income"></div>
      <gw2-pie-chart data-subscribe="ScoreUpdate">
        <svg id="chart" xmlns="http://www.w3.org/2000/svg" viewBox="-1.05 -1.05 2.1 2.1"></svg>
      </gw2-pie-chart>
      <div class="scores"></div>
      <gw2-bar-chart data-subscribe="ScoreUpdate">
        <div class="score green"></div>
        <div class="score blue"></div>
        <div class="score red"></div>
      </gw2-bar-chart>
      <div class="victory_points"></div>

      <script id="worlds-template" type="text/x-handlebars-template">
        <ul class="worlds" data-match-id="\{{id}}">
          <li class="header">{{t "World" locale}}</li>
          <li class="green">
            \{{main_worlds.green}}
            \{{#if link_worlds.green}}
            <div class="linked">
              \{{#each link_worlds.green}}
              <span>\{{this}}</span>
              \{{/each}}
            </div>
            \{{/if}}
          </li>
          <li class="blue">
            \{{main_worlds.blue}}
            \{{#if link_worlds.blue}}
            <div class="linked">
              \{{#each link_worlds.blue}}
              <span>\{{this}}</span>
              \{{/each}}
            </div>
            \{{/if}}
          </li>
          <li class="red">
            \{{main_worlds.red}}
            \{{#if link_worlds.red}}
            <div class="linked">
              \{{#each link_worlds.red}}
              <span>\{{this}}</span>
              \{{/each}}
            </div>
            \{{/if}}
          </li>
        </ul>
      </script>

      <script id="numbers-template" type="text/x-handlebars-template">
        <ul class="numbers">
          <li class="header">\{{header}}</li>
          <li>\{{values.green}}</li>
          <li>\{{values.blue}}</li>
          <li>\{{values.red}}</li>
        </ul>
      </script>

      <script id="victory-points-template" type="text/x-handlebars-template">
        <ul class="numbers">
          <li class="header">\{{header}}</li>
          <li><span class="value">\{{values.green}}</span><span>\{{#if diffs.green}}\{{diffs.green}}\{{/if}}</span></li>
          <li><span class="value">\{{values.blue}}</span><span>\{{#if diffs.blue}}\{{diffs.blue}}\{{/if}}</span></li>
          <li><span class="value">\{{values.red}}</span><span>\{{#if diffs.red}}\{{diffs.red}}\{{/if}}</span></li>
        </ul>
      </script>

    </gw2-match-status>

    <gw2-match-selector data-subscribe="SubscribeUpdate,ObjectiveUpdate" data-open="false">
      <div class="shader"></div>
      {{#each matches}}
        <div class="match-selector-match" data-match-id="{{id}}">
          <div class="match-selector-world green">
            {{main_worlds.green}}
            {{#if link_worlds.green}}
              <div class="linked">
                {{#each link_worlds.green}}<span>{{this}}</span>{{/each}}
              </div>
            {{/if}}
          </div>
          <div class="match-selector-world blue">
            {{main_worlds.blue}}
            {{#if link_worlds.blue}}
              <div class="linked">
                {{#each link_worlds.blue}}<span>{{this}}</span>{{/each}}
              </div>
            {{/if}}
          </div>
          <div class="match-selector-world red">
            {{main_worlds.red}}
            {{#if link_worlds.red}}
              <div class="linked">
                {{#each link_worlds.red}}<span>{{this}}</span>{{/each}}
              </div>
            {{/if}}
          </div>
        </div>
      {{/each}}
    </gw2-match-selector>

    <gw2-match-logger data-subscribe="SubscribeUpdate,ObjectiveUpdate">
      <script id="log-owner-template" type="text/x-handlebars-template">
        <div class="log_entry" data-changed-objective="\{{id}}" data-map-id="\{{mapId}}">
          <span class="log_time">\{{formatTime at}}:</span>
          <span class="log_message">
            <span class="name \{{toClass}}">\{{name}}</span>
            \{{t 'captured by'}}
            <span class="\{{toClass}}">\{{to}}</span>
            \{{#if from}} \{{t 'from'}} <span class="\{{fromClass}}">\{{from}}</span>\{{/if}}.</span>
        </div>
      </script>
      <script id="log-claim-template" type="text/x-handlebars-template">
        <div class="log_entry" data-changed-objective="\{{id}}" data-map-id="\{{mapId}}">
          <span class="log_time">\{{formatTime at}}:</span>
          <span class="log_message">
            <span class="name \{{objectiveClass}}">\{{name}}</span>
            \{{t 'claimed by'}}
            <span class="\{{objectiveClass}}">\{{to}}</span>.
          </span>
        </div>
      </script>
    </gw2-match-logger>

  </aside>

  <script id="upgrade-template" type="text/x-handlebars-template">
    <div class="upgrade">
      <img src="\{{icon}}" alt="\{{name}}" title="\{{name}}"/><br/>
      \{{name}}
    </div>
  </script>
  <svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 0 0" width="0" height="0">
    <defs>
      <radialGradient cx="50%" cy="53.5812623%" fx="50%" fy="53.5812623%" r="33.3751%"
                      gradientTransform="translate(0.500000,0.535813),scale(1.000000,0.835443),scale(1.000000,2.566704),translate(-0.500000,-0.535813)"
                      id="radialGradient-blue">
        <stop stop-color="#839AC0" offset="0%"></stop>
        <stop stop-color="#1C4B97" offset="100%"></stop>
      </radialGradient>
      <radialGradient cx="50%" cy="53.5812623%" fx="50%" fy="53.5812623%" r="34.3524316%"
                      gradientTransform="translate(0.500000,0.535813),scale(1.000000,0.835443),scale(1.000000,2.566704),translate(-0.500000,-0.535813)"
                      id="radialGradient-green">
        <stop stop-color="#7DBE63" offset="0%"></stop>
        <stop stop-color="#1E7B2D" offset="100%"></stop>
      </radialGradient>
      <radialGradient cx="50%" cy="53.5812623%" fx="50%" fy="53.5812623%" r="33.4472364%"
                      gradientTransform="translate(0.500000,0.535813),scale(1.000000,0.835443),scale(1.000000,2.566704),translate(-0.500000,-0.535813)"
                      id="radialGradient-red">
        <stop stop-color="#BA7471" offset="0%"></stop>
        <stop stop-color="#B62720" offset="100%"></stop>
      </radialGradient>
    </defs>
  </svg>

</div>
